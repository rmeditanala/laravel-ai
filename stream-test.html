<!DOCTYPE html>
  <html>
  <head><title>Stream Test</title></head>
  <body>
    <div id="output"></div>
    <script>
      fetch('http://localhost:8000/api/stream-chat', {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify({prompt: 'Tell me a joke'})
      })
      .then(response => {
        const reader = response.body.getReader();
        const decoder = new TextDecoder();

        function read() {
          reader.read().then(({done, value}) => {
            if (done) return;
            const chunk = decoder.decode(value);
            const lines = chunk.split('\n');
            lines.forEach(line => {
              if (line.startsWith('data: ')) {
                const data = JSON.parse(line.slice(6));
                if (!data.done) {
                  document.getElementById('output').innerHTML +=
  data.content;
                }
              }
            });
            read();
          });
        }
        read();
      });
    </script>
  </body>
  </html>
